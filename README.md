欢迎查看我开发的基于 Unity 的 2D 塔防小游戏 Demo。（演示视频和Demo见 `DemoVideo/` 文件夹）

## 项目简介

本项目采用经典的 MVC 架构设计，明确分离数据模型（Model）、视图（View）和控制器（Controller），通过事件中心实现模块间通信。UI 面板继承自 `BasePanel`，由 `UIMgr` 统一管理，结合 DOTween 实现渐隐渐显动画，UI 交互基于事件和 Lambda 表达式响应，极大提升代码灵活性和扩展性。

音乐管理模块 `MusicMgr` 负责背景音乐和音效的播放控制、音量调节与开关，音量设置会序列化保存至本地文件（persistentDataPath），程序启动时自动加载。

游戏支持多关卡选择与解锁，关卡解锁状态保存在 JSON 文件中，异步加载场景与关卡数据，加载过程显示过场动画以提升用户体验。首关包含新手引导，游戏暂停时展示引导面板，确保流程连贯。

## 主要功能与技术点

- **MVC 架构**  
  明确职责分离，数据、视图和控制分层管理，便于维护和扩展。

- **资源管理**    
  使用 ScriptableObject 统一管理敌人、塔、波次及关卡配置数据，方便编辑器内配置和动态扩展。

- **地图与路径系统**  
  利用 Unity Tile Palette 制作瓦片地图，结合 RuleTile 和 Random Brush 提高地图绘制效率。  
  使用 Waypoints 系统可视化路径，`GridMap` 和 `GridMapManager` 管理瓦片信息和游戏地图数据。

- **敌人系统**  
  敌人通过 MVC 设计管理，使用 A* Pathfinding Project 插件实现寻路，出生点和目标点可在 Inspector 配置。  
  使用对象池动态生成和管理敌人实例，怪物受伤时利用 DOTween 实现红色闪烁反馈。

- **UI 系统**  
  UI 面板继承 `BasePanel`，通过 `UIMgr` 统一管理激活状态，面板切换添加 DOTween 渐隐渐显动画。  
  事件和 Lambda 函数驱动控件交互，减少耦合，UI 状态通过事件中心与游戏逻辑同步。

- **音乐管理**  
  `MusicMgr` 管理背景音乐和音效开关及音量，初次启动时从默认配置初始化，音量设置通过 JSON 存储并持久化。

- **塔建造与升级**  
  制作地图上固定塔位，点击瓦片弹出建造面板，动态加载多条建造信息，使用 Layout Group 和 Content Size Fitter 布局。  
  建造按钮闭包绑定对应塔的 ScriptableObject 配置，实现建造和升级逻辑。  
  已有塔通过瓦片存储的塔ID支持升级替换，自动销毁旧塔并生成新塔。

- **攻击与子弹系统**  
  实现塔攻击逻辑，包含目标检测（通过 Collider 触发器实现攻击范围检测）、发射子弹。  
  子弹命中敌人时触发伤害事件，子弹和特效同样由对象池管理。

- **事件驱动架构**  
  使用 `EventManager` 监听和广播血量、金币、波次等变化，实现游戏逻辑与 UI 解耦。

- **波次管理与协程**  
  `GameManager` 控制波次流程，包括敌人出生、波次间隔时间。  
  利用协程实现波次倒计时和延迟，为玩家留出部署时间。

- **胜负判定与界面**  
  全部波次和敌人死亡判定胜利，玩家血量归零判定失败，弹出对应面板支持重新开始或返回主界面。  
  游戏暂停功能支持弹出暂停面板，包含退出与重新开始选项。

- **异步加载与新手引导**  
  选择关卡后异步加载场景及配置数据，加载时显示过场动画。  
  第一关显示新手引导面板，游戏全局暂停保证引导流畅。

- **性能优化**  
  使用 Unity Profiler 定位性能瓶颈，优化 BGM 加载为同步预加载，减少加载延迟。  
  使用图集打包美术资源，减少 DrawCall 提升渲染效率。  
  对象池显著降低实例化和销毁开销。

## 演示
- Android 实机演示
- Inspector 界面配置关卡参数演示  
- 对象池运行效果展示  
- 编辑器内运行截图和视频

## 运行说明

- Unity 2022 及以上版本  
- 所需插件和包已包含在 `Packages` 文件夹  
- 通过关卡选择界面开始游戏  
- 更多细节请查看代码注释和项目文档
